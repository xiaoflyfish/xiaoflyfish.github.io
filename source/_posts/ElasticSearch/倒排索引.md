---
title: 倒排索引
categories: 
- ElasticSearch
---

**正排索引和倒排索引：**

正排索引：文档ID到文档内容、单词的关联关系

倒排索引：单词到文档ID的关联关系

**倒排索引详解：**

组成：

* 单词词典（`Term Dictionary`）

* 倒排列表（`Posting List`）

**单词词典：**

记录所有文档的单词，一般都比较大，记录了单词到倒排列表的关联信息，一般使用`B+Tree`实现

**倒排列表：**

记录单词对应的文档集合，由倒排索引项组成。

倒排索引项主要包含：

* 文档ID。用于获取原始信息。

* 词频TF。记录该单词在该文档中的出现次数，用于计算相关性得分。

* 位置`Position`。记录单词在文档中的分词位置(多个)，用于词语搜索。

* 偏移Offset。记录单词在文档的开始和结束位置，用于高亮显示。

<img src="https://xiaoflyfish.oss-cn-beijing.aliyuncs.com/image/20201205232708.png" style="zoom:33%;" />