---
title: 命名
categories: 
- 读书笔记
- 代码精进之路从码农到工匠
---

# 变量名

变量名应该是名词，能够正确地描述业务，有表达力

按照下面这样的方式命名这个变量，阅读代码的人就能够很容易地知道这个变量的含义。

```java
int elapsedTimeInDays;
```

类似的还有魔术数，数字86400应该用常量`SECONDS_PER_DAY`来表 达；每页显示10行记录的，10应该用`PAGE_SIZE`来表达。

# 函数名

函数命名要具体，空泛的命名没有意义。例如，processData()就不是一个好的命名，因为所有的方法都是对数据的处理，这样的命名并没有 表明要做的事情，相比之下，validateUserCredentials()或者 eliminateDuplicateRequests()就要好许多。

函数的命名要体现做什么，而不是怎么做。假如我们将雇员信息存储 在一个栈中，现在要从栈中获取最近存储的一个雇员信息，那么 getLatestEmployee()就比popRecord()要好，因为栈数据结构是底层实现 细节，命名应该提升抽象层次、体现业务语义。

合理的命名可以使你 省掉记住“出栈”的脑力步骤，你只需要简单地说“取最近雇员的信息”。

# 类名

对于 一个应用系统，我们可以将类分为两大类：实体类和辅助类。

实体类承载了核心业务数据和核心业务逻辑，其命名要充分体现业务语义，并在团队内达成共识，如Customer、Bank和Employee等。

辅助类是辅佐实体类一起完成业务逻辑的，其命名要能够通过后缀来 体现功能。例如，用来为Customer做控制路由的控制类 CustomerController、提供Customer服务的服务类CustomerService、获取 数据存储的仓储类CustomerRepository。 

对于辅助类，尽量不要用Helper、Util之类的后缀，因为其含义太过笼 统，容易破坏SRP（单一职责原则）。

比如对于处理CSV，可以这样 写：

```java
CSVHelper.parse(String) 
CSVHelper.create(int[])
```

但是我更建议将CSVHelper拆开：

```java
CSVParser.parse(String) 
CSVBuilder.create(int[])
```

# 包名

包（Package）代表了一组有关系的类的集合，起到分类组合和命名空 间的作用。

包名应该能够反映一组类在更高抽象层次上的联系。

例如，有一组类 Apple、Pear、Orange，我们可以将它们放在一个包中，命名为fruit。

包的命名要适中，不能太抽象，也不能太具体。此处以上面提到的水 果作为例子，如果包名过于具体，比如Apple，那么Pear和Orange放进 该包中就不恰当了；如果包名太抽象，称为Object，而Object无所不 包，这就失去了包用来限定范围的作用。

# 模块名

这里说的模块（Module）主要是指Maven中的Module，相对于包来说， 模块的粒度更大，通常一个模块中包含了多个包。

在Maven中，模块名就是一个坐标: `<groupId, artifactId>`。一方面，其名 称保证了模块在Maven仓库中的唯一性；另一方面，名称要反映模块在 系统中的职责。

# 保持一致性

保持命名的一致性，可以提高代码的可读性，从而简化复杂度。因 此，我们要小心选择命名，一旦选中，就要持续遵循，保证名称始终 一致。

**每个概念一个词**

每个概念对应一个词，并且一以贯之。例如，fetch、retrieve、get、find 和query都可以表示查询的意思，如果不加约定地给多个类中的同种查 询方法命名，你怎么记得是哪个类中的哪个方法呢？

同样，在一段代 码中，同时存在manager、controller和handler，会令人感到困惑。

因此在项目中，作者通常按照表所示的约定，保持命名的一致性。

![](https://xiaoflyfish.oss-cn-beijing.aliyuncs.com/image/20201217232325.png)

**使用对仗词**

遵守对仗词的命名规则有助于保持一致性，从而提高代码的可读性。 像first/last这样的对仗词就很容易理解；而像fileOpen()和fClose()这样的 组合则不对称，容易使人迷惑。下面列出一些常见的对仗词组：

add/remove increment/decrement open/close begin/end insert/delete show/hide create/destroy lock/unlock source/target first/last min/max start/stop get/set next/previous up/down old/new

**后置限定词**

很多程序中会有表示计算结果的变量，例如总额、平均值、最大值 等。如果你要用类似Total、Sum、Average、Max、Min这样的限定词来 修改某个命名，那么记住把限定词加到名字的最后，并在项目中贯彻 执行，保持命名风格的一致性。

这种方法有很多优点。首先，变量名中最重要的部分，即为这一变量 赋予主要含义的部分应位于最前面，这样可以突出显示，并会被首先 阅读到。其次，可以避免同时在程序中使用totalRevenue和revenueTotal 而产生的歧义。

如果贯彻限定词后置的原则，我们就能收获一组非常 优雅、具有对称性的变量命名，例如revenueTotal（总收入）、 expenseTotal（总支出）、revenueAverage（平均收入）和 expenseAverage（平均支出）。

需要注意的一点是Num这个限定词，Num放在变量名的结束位置表示一 个下标，customerNum表示的是当前客户的序号。

为了避免Num带来的 麻烦，我建议用Count或者Total来表示总数，用Id表示序号。这样， customerCount表示客户的总数，customerId表示客户的编号。

**统一技术语言** 

有些技术语言是通用的，业内人士都能理解，我们应该尽量使用这些 术语来进行命名。

这些通用技术语言包括DO、DAO、DTO、ServiceI、 ServiceImpl、Component和Repository等。

例如，在代码中看到OrderDO 和OrderDAO，马上就能知道OrderDO中的字段就是数据库中Order表字 段，对Order表的操作都在OrderDAO里面。

# 自明的代码

**中间变量**

我们可以通过添加中间变量让代码变得更加自明，即将计算过程打散成多个步骤，并用有意义的变量名来命名中间变量，从而把隐藏的计算过程以显性化的方式表达出来。

例如，我们要通过Regex来获得字符串中的值，并放到map中。

```java
Matcher matcher = headerPattern.matcher(line);
if(matcher.find()){
	headers.put(matcher.group(1), matcher.group(2));
}
```

用中间变量，可以写成如下形式：

```java
Matcher matcher = headerPattern.matcher(line);
if(matcher.find()){
	String key = matcher.group(1);
	String value = matcher.group(2);
	headers.put(key, value);
}
```

中间变量的这种简单用法，显性地表达了第一个匹配组是key，第二个 匹配组是value。

只要把计算过程打散成一系列良好命名的中间值，不透明的语义自然会变得透明

**设计模式语言**

例如，Spring里面的ApplicationListener就充分体现了它的设计和用处。 

通过这个命名，我们知道它使用了观察者模式，每一个被注册的 ApplicationListener在Application状态发生变化时，都会接收到一个 notify。这样我们就可以在容器初始化完成之后进行一些业务操作，比如数据加载、初始化缓存等。

**小心注释**

如果注释是为了阐述代码背后的意图，那么这个注释是有用的；如果 注释是为了复述代码功能，那么就要小心了，这样的注释往往意味 着坏味道

1.不要复述功能

2.要解释背后意图，注释要能够解释代码背后的意图

# 命名工具

可以在IDE中安装一个搜索插件，便于搜索海量的互联网上的开源代码。

举例说明，一般会安装一个叫作OnlineSearch 的插件，插件里自带了像SearchCode这样的代码搜索工具，也可以自己配置像Codelf这样的代码搜索工具。

