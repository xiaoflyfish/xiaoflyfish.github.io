---
title: 分支管理
categories: 
- 学习笔记
- GIT1
---

**查看分支**

> 查看本地的分支

Git 查看分支的命令为 `git branch` ，在不带参数的情况下，默认查看到的是本地分支列表

```
git branch
```

> 查看所有分支

在 `git branch` 中再加入一个 `-a` 参数，可以理解为 all 的意思，就是查看本地的分支和远程的所有分支

```
git branch -a
```

可以看到本地分支和远程分支，远程分支显示颜色为红色，可以看到都是以 remotes开头的

**新建分支**

把远程分支在本地创建，可以通过 `git checkout 分支名` 命令进行，这个命令其实是切换分支用的。但当它发现你本地不存在这个分支，会自动找到远程对应的分支然后在本地进行创建

```
git checkout master
```

在执行前，需要确保这个分支在远程或者本地已经存在

> 新建本地分支

新建一个远程和本地都不存在的分支方式，和切换分支区别不大，只需要在 `git checkout 分支名` 中间加入参数 `-b` 即可。通过这种方式，创建的分支结构和内容会与当前所在的分支一模一样，也就是说，它其实就是复制了当前的 分支

```
git checkout -b test
```

此时如果使用 `git push` 是不能直接推送的，需要在第一次推送的时候指定远程分支名

```
git push --set-upstream origin test
```

**合并分支**

> 合并代码

合并的时候， Git 会对比两个分支代码的差异，当 test 分支处于比较新的状态时候，Git 会将 test 分支的代码和提 交记录复制到 master 分支中来

```
git merge test
```

> 查看合并记录

在代码合并之后，可以通过 `git log` 方式查看到合并记录

**删除分支**

> 普通删除

Git 中删除分支的命令为 `git branch -d 分支名` ， 其中参数 `-d` 代表的是普通删除。一般情况下，删除使用普通删除 即可。普通删除相对来说比较安全，避免造成数据丢失的情况

```
git branch -d test
```

> 强制删除

在极少数情况下你可能会遇到普通删除无法将分支删除的情况，这个时候你可以将 -d 替换成 -D ，这样就可以进行强制删除，参考命令如下：

```
git branch -D test
```

# 比较分支差异

> 查看文件差异

有时候，我们想知道当前的分支与另外一个分支，有哪几个文件不一样

```
git diff master dev --stat
```

> 显示文件具体修改

现在我想知道某一个文件具体被修改了什么内 容，此时可以参考如下命令：

```
git diff master dev index.php
```

在命令中使用了 master 分支最新的代码与 dev 分支最新的代码进行对比，同时传递了一个文件名，因此这里只会 展示此文件的具体修改内容

> 显示全部文件的修改

刚才，我们通过指定了某一个文件查看具体的代码修改，其实这里还有一种用法，就是不填文件名，那么就是查看 所有的修改

```
git diff master dev
```

> 查看新纪录 

我可以通过查看 dev 分支中有的记录而在生产分支中没有的记录

```
git log dev ^master
```

> 单纯比较差异

现在遇到了一个新的情况，我不管两个分支谁提交的记录多，谁提交的少；

而是只想知道两个分支记录有什么不一 样

```
git log branch1...branch2
```

> 查看各记录存在于那些分支上

刚才上面的查看方式其实有一个缺陷，就是没有在每一个记录中显示所属分支，这样如果差异记录太多的时候就会 造成不方便，所以我们还可以在命令中加入` --left-right `参数，这样在展示每条差异记录的时候，都能看出这条记录 所属分支

```
git log --left-right develop...test
```

注意看我黄色框选的箭头符号，因为我们在命令中加入了 `-–left-right` 所以左箭头 < 表示是 develop 的， 右箭头 > 表示是 test 分支的

# 删除过期分支

执行删除远程分支命令

```
git push origin --delete dev
```

还可以使用查看远程仓库的信息

```
git remote show origin
```

可以看到 origin 的具体地址，远程分支列表，以及本地分支与远程分支相对应的关联关系等信息

> 清理本地分支

```
git branch -d test1
```

# 恢复已删除分支

https://blog.csdn.net/PersonalM/article/details/108385526