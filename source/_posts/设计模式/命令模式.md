---
title: 命令模式
categories: 
- 设计模式
---

定义：将请求封装成对象，以便使用不同的请求

命令模式解决了应用程序中对象的职责以及它们之间的通信方式

命令对象只知道如何发送请求，不需要知道如何完成请求

**适用场景：**

请求调用者和请求接收者需要解耦，使得调用者和接收者不直接交互

# 案例

**我们引入一个业务场景：**

课程里面是有视频的，我们想要局部关闭某一个视频，或者是局部打开某一个视频，如第一章节是开放的，是可以免费看的，而其他章节的课程就是需要购买了之后才能观看的；

现在，管理员决定把第二章节也免费观看，然后又过了一阵，把第三章节的视频给进行开放了；又过一阵，把第二章节给关闭了；就是这么一个业务场景；

课程视频类：

```java
/**
 * 课程视频类
 */
public class CourseVideo {
    private String name;

    public CourseVideo(String name) {
        this.name = name;
    }

    public void openVideo(){
        System.out.println(this.name+"课程打开");
    }

    public void closeVideo(){
        System.out.println(this.name+"课程关闭");
    }
}
```

命令接口：

```java
public interface Command {

    void execute();

}
```

打开课程视频命令类：

```java
public class OpenCourseVideoCommand implements Command {
    private CourseVideo courseVideo ;

    public OpenCourseVideoCommand(CourseVideo courseVideo) {
        this.courseVideo = courseVideo;
    }
    @Override
    public void execute() {
        this.courseVideo.openVideo();
    }
}
```

关闭课程视频命令类：

```java
public class CloseCourseVideoCommand implements Command {
    private CourseVideo courseVideo;

    public CloseCourseVideoCommand(CourseVideo courseVideo) {
        this.courseVideo = courseVideo;
    }

    @Override
    public void execute() {
        this.courseVideo.closeVideo();
    }
}
```

员工类：

```java
public class Staff {
    //这里用到 ArrayList的有序列表的属性，先进先出，后进后出
    private List<Command> commandList = new ArrayList<Command>();

    /**
     * 员工添加命令
     */
    public void addCommand(Command command){
       commandList.add(command);
    }

    /**
     * 员工执行命令
     */
    public void executeCommand(){
        for(int i=0;i<commandList.size();i++){
            commandList.get(i).execute();
        }
        //这个别忘了，最后把命令清空
        commandList.clear();
    }
}
```

```java
public class Test {
    public static void main(String[] args) {
        CourseVideo courseVideo = new CourseVideo("Java设计模式");
        OpenCourseVideoCommand openCourseVideoCommand = new OpenCourseVideoCommand(courseVideo);
        CloseCourseVideoCommand closeCourseVideoCommand = new CloseCourseVideoCommand(courseVideo);

        Staff staff = new Staff();
        staff.addCommand(openCourseVideoCommand);
        staff.addCommand(closeCourseVideoCommand);
        staff.executeCommands();
    }
}
```