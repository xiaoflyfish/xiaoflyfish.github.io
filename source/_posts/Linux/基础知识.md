---
title: 信号
categories: 
- Linux
---

# 信号

在命令行支持kill -l，可以显示所有的信号列表

**常用信号**

| 信号宏名 | 信号编号 | 说明                                   | 系统默认处理方式   |
| :------- | :------: | :------------------------------------- | :----------------- |
| SIGABRT  |    6     | 终止进程，调用abort函数时产生          | 终止，产生core文件 |
| SIGALRM  |    14    | 超时，调用alarm函数时产生              | 终止               |
| SIGBUS   |    7     | 硬件故障                               | 终止，产生core文件 |
| SIGCHLD  |    17    | 子进程状态改变                         | 忽略               |
| SIGINT   |    2     | 终止进程(Ctrl+C)                       | 终止               |
| SIGIO    |    29    | 异步通知信号                           | 终止               |
| SIGKILL  |    9     | 无条件终止一个进程，不可以被捕获或忽略 | 终止               |
| SIGPIPE  |    13    | 写没有读权限的管道文件时               | 终止               |
| SIGPOLL  |    8     | 轮训事件，涉及POLL机制                 | 终止               |
| SIGTERM  |    15    | kill PID时默认发送的信号               | 终止               |
| SIGQUIT  |    3     | 终止进程( Ctrl+\ )                     | 终止，产生core文件 |
| SIGSEGV  |    11    | 无效存储访问(指针错误)                 | 终止               |
| SIGUSER1 |    10    | 用户自定义信号1                        | 终止               |
| SIGUSER2 |    10    | 用户自定义信号2                        | 终止               |

**一台机器最多能撑多少个TCP连接**

- **TCP连接的客户端机：**每一个ip可建立的TCP连接理论受限于`ip_local_port_range`参数，也受限于65535。但可以通过配置多ip的方式来加大自己的建立连接的能力
- **TCP连接的服务器机：**每一个监听的端口虽然理论值很大，但这个数字没有实际意义。最大并发数取决你的内存大小，每一条静止状态的TCP连接大约需要吃3.3K的内存

# Fork

fork()函数通过系统调用创建一个与原来进程几乎完全相同的进程

子进程得到与父进程用户级虚拟地址空间相同的（但是独立的）一份副本，包括代码和数据段、堆、共享库以及用户栈。子进程还获得与父进程任何打开文件描述符相同的副本，当父进程调用fork时，子进程可以读写父进程中打开的任何文件

父进程和新创建的子进程之间最大的区别在于它们有不同的PID

1.在父进程中，fork返回新创建子进程的进程ID；  

2.在子进程中，fork返回0；   

3.如果出现错误，fork返回一个负值

在fork函数执行完毕后，如果创建新进程成功，则出现两个进程，一个是子进程，一个是父进程

在子进程中，fork函数返回0，在父进程中，fork返回新创建子进程的进程ID。我们可以通过fork返回的值来判断当前进程是子进程还是父进程。

每个进程都有一个独特（互不相同）的进程标识符，可以通过getpid()函数获得，还有一个记录父进程pid的变量，可以通过getppid()函数获得变量的值