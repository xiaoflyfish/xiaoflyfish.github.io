---
title: 事务
categories: 
- Spring
---

# 传播行为

Spring定义了七种传播行为，这里以方法A和方法B发生嵌套调用时如何传播事务为例说明：

**PROPAGATION_REQUIRED**：默认，A如果有事务，B将使用该事务；如果A没有事务，B将创建一个新的事务

**PROPAGATION_SUPPORTS**：A如果有事务，B将使用该事务；如果A没有事务，B将以非事务执行

**PROPAGATION_MANDATORY**：A如果有事务，B将使用该事务；如果A没有事务，B将抛异常

**PROPAGATION_REQUIRES_NEW**：A如果有事务，将A的事务挂起，B创建一个新的事务；如果A没有事务，B创建一个新的事务

**PROPAGATION_NOT_SUPPORTED**：A如果有事务，将A的事务挂起，B将以非事务执行；如果A没有事务，B将以非事务执行

**PROPAGATION_NEVER**：A如果有事务，B将抛异常；A如果没有事务，B将以非事务执行

**PROPAGATION_NESTED**：A和B底层采用保存点机制，形成嵌套事务

