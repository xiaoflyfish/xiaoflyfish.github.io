---
title: 负载均衡
categories: 
- Nginx
---

负载均衡是指如何将网络请求派发到集群中的一个或多个节点上处理，一般来说，传统的负载均衡可以分为硬件负载均衡和软件负载均衡

硬件负载均衡，就是通过专门的硬件来实现负载均衡，比如常见的 `F5` 设备

软件负载均衡则是通过负载均衡软件实现，常见的就是 Nginx

**常见的复杂均衡策略**

> 轮询策略

轮询策略是最容易想到也是应用最广泛的负载均衡策略。轮询策略会顺序地从服务器列表中选择一个节点，请求会均匀地落在各个服务器上。轮询适合各个节点性能接近，并且没有状态的情况，但是在实际开发中，不同节点之间性能往往很难相同，这时候就可以应用另一种加权轮询策略

> 加权轮询

给每个节点添加不同的权重。举个简单的例子，在实际开发中通常使用数组的数据结构来实现轮询，比如现在我有 `A、B、C` 三个节点，就可以在数组中添加 `1、2、3` 的数据，分别对应三个节点。现在我进行一个加权调整，让 `1、2、3` 对应 `A，4、5` 对应 `B、C`，这时候继续进行轮询，不同节点的权重就有变化了

> 随机策略

随机策略和轮询相似，从列表中随机的取一个，最好不要应用随机策略，可能会导致请求不均匀

> 最小响应时间

这个主要是在一些对请求延时敏感的场景中，在进行路由时，会优先发送给响应时间最小的节点

> 最小并发数策略

最小并发策略会记录当前时刻每个节点正在处理的事务数，在路由时选择并发最小的节点，最小并发策略可以比较好地反应服务器运行情况，适用于对系统负载较为敏感的场景

**负载均衡如何实现**

在分布式服务调用中，根据负载均衡实现的位置不同，可以分为**服务端负载均衡和客户端负载均衡**

在服务器端负载均衡中，请求先发送到负载均衡服务器，然后通过负载均衡算法，在众多可用的服务器之中选择一个来处理请求

在客户端负载均衡中，不需要额外的负载均衡软件，客户端自己维护服务器地址列表，自己选择请求的地址，通过负载均衡算法将请求发送至该服务器
