---
title: 红黑树
categories: 
- 数据结构
---

红黑树本质上是一种二叉查找树，但它在二叉查找树的基础上额外添加了一个标记（颜色），同时具有一定的规则，这些规则使红黑树保证了一种平衡，插入、删除、查找的最坏时间复杂度都为`O(logn)`

每个节点增加一个存储位表示节点的颜色

<img src="https://xiaoflyfish.oss-cn-beijing.aliyuncs.com/image/20201228190544.png" style="zoom:33%;" />

**基本特性**

- 每个节点要么是红色，要么是黑色
- 根节点永远是黑色的
- 所有的叶节点都是是黑色的
- 每个红色节点的两个子节点一定都是黑色
- 不可能有连在一起的红色结点（黑色的就可以）
- 从任一节点到其子树中每个叶子节点的路径都包含相同数量的黑色节点
- 确保没有一条路径会比其他路径长出俩倍，红黑树是相对是接近平衡的二叉树

**红黑树调整可以分为两类：**

一类是颜色调整，即改变某个节点的颜色，这种比较简单，直接将节点颜色进行转换即可

另一类是结构调整，改变检索树的结构关系，结构调整主要包含两个基本操作：左旋，右旋

在对红黑树进行添加或删除之后，都会旋转和着色

**平衡二叉树区别**

AVL树是高度平衡的，频繁的插入和删除，会引起频繁的`reblance`，导致效率下降红黑树不是高度平衡的，插入最多两次旋转，删除最多三次旋转

**应用场景**

红黑树的应用比较广泛，主要是用它来存储有序的数据，它的时间复杂度是`O(lgn)`，效率非常之高

Java集合中的`TreeSet`和`TreeMap`，C++ STL中的set、map，以及Linux虚拟内存的管理，都是通过红黑树去实现的

IO多路复用的`epoll`的的的实现采用红黑树组织管理的的的`sockfd`，以支持快速的增删改