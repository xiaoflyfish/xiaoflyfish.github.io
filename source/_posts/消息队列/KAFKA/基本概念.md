---
title: 基本概念
categories: 
- 消息队列
- KAFKA
---

**主题**

在 Kafka 中，发布订阅的对象是主题（Topic），你可以为每 个业务、每个应用甚至是每类数据都创建专属的主题

**生产者和消费者**

向主题发布消息的客户端应用程序称为生产者，生产者程序通常持续不断地 向一个或多个主题发送消息

订阅这些主题消息的客户端应用程序就被称为消费者，消费者也能够同时订阅多个主题的消息

**Broker**

一个Kafka集群由多个 Broker 组成，Broker 负责接收和处理客户端发送过来的请求，以及 对消息进行持久化

虽然多个 Broker 进程能够运行在同一台机器上，但更常见的做法是将 不同的 Broker 分散运行在不同的机器上，这样如果集群中某一台机器宕机，即使在它上面 运行的所有 Broker 进程都挂掉了，其他机器上的 Broker 也依然能够对外提供服务。

这其 实就是 Kafka 提供高可用的手段之一

**备份机制**

实现高可用的另一个手段就是备份机制

备份的思想很简单，就是把相同 的数据拷贝到多台机器上，而这些相同的数据拷贝在 Kafka 中被称为副本

Kafka 定义了两类副本：领导者副本和追随者副本

前者对外提供服务，这里的对外指的是与 客户端程序进行交互；而后者只是被动地追随领导者副本而已，不能与外界进行交互。

虽然有了副本机制可以保证数据的持久化或消息不丢失，但没有解决伸缩性的问题。

我们拿副本来说，虽然现在有了领导者副本和追随者副本，但倘若领导者副本积累了太多的数据以至于单台 Broker 机器都无法容纳了，此时应该怎么办呢？

一个很自然的想法就 是，能否把数据分割成多份保存在不同的 Broker 上

**分区**

这种机制就是所谓的分区

Kafka 中的分区机制指的是将每个主题划分成多个分区，每个分区是一组有 序的消息日志。

生产者生产的每条消息只会被发送到一个分区中，也就是说如果向一个双分 区的主题发送一条消息，这条消息要么在分区 0 中，要么在分区 1 中。

每个分区下可以配置若干个副本，其中只能有 1 个领 导者副本和 N-1 个追随者副本。

生产者向分区写入消息，每条消息在分区中的位置信息由 一个叫位移

**消费者组**

多个消费者实例共同组成一个组来 消费一组主题。这组主题中的每个分区都只会被组内的一个消费者实例消费，其他消费者实 例不能消费它。

<img src="https://xiaoflyfish.oss-cn-beijing.aliyuncs.com/image/20201221173956.png" alt="img" style="zoom:50%;" />